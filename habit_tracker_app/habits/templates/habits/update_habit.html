{% extends 'base.html' %}

{% block title %} Редактирование привычки - "{{ object }}" {% endblock title %}

{% block content %}
    <h3>Если вы хотите изменить значение периодичности или типа даты привычки, то все предыдущие логи будут стерты!</h3>
    <form method="post">
        {% csrf_token %}
        {{ form.non_field_errors }}
        {% for field in form %}
            <div class="fieldWrapper">
                {{ field.errors }}
                <p id="field_{{ field.auto_id }}">{{ field.label_tag }} {{ field }}</p>
            </div>
        {% endfor %}
        <input type="submit" value="Отредачить">
    </form>
{% endblock content %}

{% block script %}
    <script>
        const freq_field_block = document.getElementById('field_id_frequency');
        const freq_select_field = document.getElementById('id_frequency');
        const datetype = document.getElementById('id_datetype');

        datetype.addEventListener('change', function() {
            const selectedDatetype = this.value;

            if (selectedDatetype == 'daily') {
                freq_field_block.style.display = 'none';
                freq_select_field.value = '1';
            } else {
                freq_field_block.style.display = 'block';
            }
        });
    </script>
{% endblock script %}